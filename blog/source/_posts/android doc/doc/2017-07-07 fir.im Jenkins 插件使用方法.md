# fir.im Jenkins 插件使用方法

 发表于 2017-07-07 | 更新于: 2017-07-27 | 分类于 [Jenkins](http://android9527.com/categories/Jenkins/)

 字数统计: 1.1k | 阅读时长 ≈ 4 分钟

#### fir.im Jenkins 插件

使用fir.im Jenkins 插件可以更快速地上传 apk/ipa 安装包到 fir.im.


#### 安装Jenkins

1. 方法一：直接下载安装包

   Download Jenkins https://jenkins.io/index.html
   安装完成后在 Terminal 中输入，即可打开 Jenkins。

```
   open /Applications/Jenkins/jenkins.war
```

2. 方法二：使用命令行安装

   安装 homebrew

```
   $ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

   安装 Jenkins

```
   $ brew install jenkins
```

   启动 Jenkins

```
   $ jenkins
```

#### 访问 Jenkins

请在浏览器输入地址:
http://localhost:8080/
使用安装包安装后会自动打开，如果端口冲突那么请修改端口

```
defaults write /Library/Preferences/org.jenkins-ci httpPort xxxx
```

如果下载的是war的包，用这个命令更改端口

```
java -jar jenkins.war --httpPort=8090
```

#### 安装 fir.im 的上传插件

#### 插件介绍

该插件主要功能有2点：

1. 上传 apk/ipa 安装包 到 fir.im
2. 上传符号表到 BugHD，方便查看混淆后的 Log 日志

注意：在使用之前，请确认自己创建的 Jenkins 项目可以正常编译生成 ipa/apk 文件。 该插件的一般使用情景是编译完生成 apk/ipa 后，如果未指定 apk/ipa 生成目录，插件会默认选择 Jenkins 项目目录。

#### 下载插件

Jenkins 插件下载地址 http://7xju1s.com1.z0.glb.clouddn.com/fir-plugin-1.9.5.hpi

#### 安装插件

- 进入 Jenkins 管理界面后，点击左侧进入 `系统管理`
  [![jenkins-1](http://android9527.com/images/jenkins/jenkins-1.jpg)](../../../../../images/jenkins/jenkins-1.jpg)
- 然后找到 `管理插件` 并点击进入
  [![jenkins-2](http://android9527.com/images/jenkins/jenkins-2.jpg)](../../../../../images/jenkins/jenkins-2.jpg)
- 进入插件管理后，点击 `高级` 选项卡
  [![jenkins-3](http://android9527.com/images/jenkins/jenkins-3.jpg)](../../../../../images/jenkins/jenkins-3.jpg)
- 然后在页面找到 `上传插件`，选择已下载好的 `fir.im jenkins 插件文件路径`，并点击 `上传` 等待安装成功。
  [![jenkins-4](http://android9527.com/images/jenkins/jenkins-4.jpg)](../../../../../images/jenkins/jenkins-4.jpg)
- 安装成功后，如果没有创建 Jenkins 项目，请先创建项目。如果需要配置已存在的项目，请进入在 `配置` 中找到 `增加构建后操作步骤` ，并选择 `Upload to fir.im` 添加到 Jenkins 项目中。
  [![jenkins-5](http://android9527.com/images/jenkins/jenkins-5.jpg)](../../../../../images/jenkins/jenkins-5.jpg)
- 添加成功后开始配置各种参数，如图显示：
  [![jenkins-6](http://android9527.com/images/jenkins/jenkins-6.jpg)](../../../../../images/jenkins/jenkins-6.jpg)

#### 配置插件

- fir.im Token（必填）
  fir.im Token 查看方法：直接点击 `API token` (http://fir.im/apps/apitoken) 进行查看.
  [![plugins-1](http://android9527.com/images/jenkins/plugins-1.jpg)](../../../../../images/jenkins/plugins-1.jpg)
- IPA/APK Files（可选）
  接下来，选择生成 `ipa/apk` 文件路径
  注意：如果没有填写该选项，插会件自动默认查找 Jenkins 创建的项目目录下的 `apk/ipa` 文件
- BugHD token（可选）
  作用：BugHD上传 mapping.txt/dSYM 文件 API 的调用权限
  注意：如果需要上传符号表则是必填项；不需要上传混淆表，则不需要填写
  `BugHD token 查看方法`：请访问 `BugHD API token` http://bughd.com/account ，登录后进行查看。
  [![plugins-1](http://android9527.com/images/jenkins/plugins-3.jpg)](../../../../../images/jenkins/plugins-3.jpg)
- BugHD project ID(可选)
  作用：判断具体上传到指定的 bughd 项目
  注意：如果需要上传符号表，则是必填项；不需要上传则不用填写
  `BugHD project ID` 查看方法： 请访问 `BugHD Projects` http://bughd.com/projects ，登录后找到你要上传符号表的项目，进入该项目，选择 `项目设置` 选项卡进行查看。
  [![plugins-1](http://android9527.com/images/jenkins/plugins-4.jpg)](../../../../../images/jenkins/plugins-4.jpg)
- dSYM File or mapping File(可选)
  作用：选择生成 dSYM/mapping.txt 文件路径
  注意：如果需要上传符号表，则是必填项；不需要上传则不用填写
- Build Notes(可选)
  作用：上传 fir.im 后，可显示出更新日志

#### Jenkins 插件更新日志

- 2015-11-13 V1.1 上线
- 2015-11-25 V1.2 修复 slave 状态下上传失败的Bug
- 2015-11-30 V1.3 修复 上传 apk 图标过小的问题
- 2015-12-01 V1.4 修复 ipa文件解析 icon 出错的问题
- 2015-12-08 V1.5 增加 上传apk/ipa文件的过滤条件
- 2015-12-16 V1.6 Bug fix
- 2016-01-08 V1.7 Bug fix
- 2016-03-14 V1.9.1 修复 解析图标失败后导致无法上传 & 获取git log失败的问题
- 2016-03-18 V1.9.2 更新 dsym/mapping 路径支持环境变量 changelog支持环境变量
- 2016-06-29 V1.9.2.3 修复 应用上传问题
- 2016-09-06 V1.9.3 修复 apk/ipa解析的错误
- 2016-09-16 V1.9.4 修复 ChangeLog选项环境变量不变的bug
- 2016-11-09 V1.9.4 修复 解析ipa的问题
  最后，关于更多 Jenkins 的问题推荐阅读 fir.im 的用户写的 Jenkins+GitHub+Xcode+fir搭了一个持续集成环境http://www.jianshu.com/p/a17167274463)

#### 参考资料：

[fir.im Jenkins 插件使用方法](http://blog.fir.im/jenkins)